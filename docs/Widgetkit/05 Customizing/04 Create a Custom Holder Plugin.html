<h1 class="title">Create a Custom Holder Plugin</h1>

<p>
    Placing your WK customisations into the Widgetkit folder is a bad practice for many reasons, instead checkout the following alternatives.
</p>

<h2>Theme folder</h2>

<p>
    If using Warp7, you can place the customisations into the <code>THEME-NAME/widgetkit/content/PROVIDER-NAME</code> folder. Simple as that, Widgetkit will check that folder for any Content Provider or Widget plugin.
</p>

<h2>Custom Plugin</h2>

<p>
    Placing the customisations in your own CSM plugin is the best way to provide standallone solutions without compromising those when updating the main component. Your standalone plugin should load the Widgetkit App and register your custom plugins during the Widgetkit booting.
</p>

<p>
    In fact is very easy, let's see how that can be done in Joomla.
</p>

<pre><code>
&lt;?php

class plgSystemPLUGIN-NAME extends JPlugin
{
    public function onAfterInitialise()
    {
        // load Widgetkit App
        if (!$app = @include JPATH_ADMINISTRATOR.'/components/com_widgetkit/widgetkit-app.php') {
            return;
        }

        // register all plugins
        $app['plugins']->addPath(__DIR__.'/plugins/*/*/plugin.php');

        // register each CONTENT provider plugin path
        $app['locator']->addPath('plugins/content/PLUGIN-NAME', __DIR__.'/plugins/content/PLUGIN-NAME');

        // register each WIDGET plugin path
        $app['locator']->addPath('plugins/widgets/PLUGIN-NAME', __DIR__.'/plugins/widgets/PLUGIN-NAME');
    }
}

</code></pre>

<p>Similary we can do in WordPress.</p>

<pre><code>
&lt;?php

    /*
        Plugin Name: PLUGIN-NAME
    */

    add_action('plugins_loaded', function() {

        // load Widgetkit App
        $app = $GLOBALS['widgetkit'];
        
         // register all plugins
        $app['plugins']->addPath(__DIR__.'/plugins/*/*/plugin.php');

        // register each CONTENT provider plugin path
        $app['locator']->addPath('plugins/content/PLUGIN-NAME', __DIR__.'/plugins/content/PLUGIN-NAME');

        // register each WIDGET plugin path
        $app['locator']->addPath('plugins/widgets/PLUGIN-NAME', __DIR__.'/plugins/widgets/PLUGIN-NAME');
    }
    });
</code></pre>

<p>
    The standalone plugin folder structure would looke like this.
</p>
    
<pre><code>
+-- plugins/                // Your custom Widgetkit plugins folder
+----- content/             // Content provider plugins folder
|         PLUGIN-NAME/
+----- widgets/             // Widgets plugins folder
|         PLUGIN-NAME/
|-- cms_plugin.php          // The main plugin file
|-- cms_plugin.xml          // The main plugin xml file (Joomla)
</code></pre>