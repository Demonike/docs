<h1 class="title">Create a Custom Widget Plugin</h1>

<p>Custom widget plugins are stored in <code>THEME_NAME/widgetkit/plugins/widgets/</code>. To create your own widget plugin, you can copy an existing one on start changing the containing files are start from scratch following this simple tutorial.</p>

<h2>File structure</h2>

<pre><code>
+-- views/
|      edit.php
|      widget.php
+-- plugin.php
+-- widget.svg
</code></pre>

<h2>plugin.php</h2>

The <code>plugin.php</code> contains a PHP array to configure your widget plugin.
Several keys are available to pass configuration options to Widgetkit
and to listen to events triggered by Widgekit.

<pre><code>
&lt;?php

return array(

    'main' => 'YOOtheme\\Widgetkit\\Widget\\Widget',

    'config' => function($app) {
        return array(
            'name'  => 'example',
            'label' => 'Example Widget Plugin',
            'icon'  => $app['url']->to('plugins/widgets/example/widget.svg'),
            'view'  => 'plugins/widgets/example/views/widget.php',
            'item'  => array('title', 'content'),
            'settings' => array(
                'size'   => 'h3',
                'class'  => ''
            )
        );
    },

    'events' => array(
        'init.site' => function($event, $app) {},
        'init.admin' => function($event, $app) {
            $app['angular']->addTemplate('example.edit', 'plugins/widgets/example/views/edit.php', true);
        }
    )

);
</code></pre>

<table>
    <thead>
        <tr>
            <td>Key</td>
            <td>Value</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>main</code></td>
            <td>Point to the namespace of the class to be used for Widget initaliziation. Unless you want to customize every little detail, you will be fine by using the default class <code>YOOtheme\\Widgetkit\\Widget\\Widget</code></td>
        </tr>
        <tr>
            <td><code>config</code></td>
            <td>A PHP array for configuration of the widget plugin and default settings. You can assign a plain PHP array or use a callback function that returns an array on evaluation.</td>
        </tr>
        <tr>
            <td><code>events</code></td>
            <td>An array of Widgetkit events you can hook into.</td>
        </tr>
    </tbody>
</table>

The possible keys for the <code>config</code> and <code>events</code> array are explained below:

<h3>Configuration passed as <code>config</code> array</h3>

<table>
    <thead>
        <tr>
            <td>Key</td>
            <td>Value</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>name</code></td>
            <td>Unique name of the widget</td>
        </tr>
        <tr>
            <td><code>label</code></td>
            <td>More verbose name of the widget, used as a label</td>
        </tr>
        <tr>
            <td><code>icon</code></td>
            <td>Path to an icon that will be used in the widget plugin overview</td>
        </tr>
        <tr>
            <td><code>view</code></td>
            <td>Path to view file that will be used when rendering the widget</td>
        </tr>
        <tr>
            <td><code>item</code></td>
            <td>A list of fields this widget type requires from a selected content element. Example: The map requires a <code>location</code> field to be present.</td>
        </tr>
        <tr>
            <td><code>settings</code></td>
            <td>Default settings to be used for every widget instance</td>
        </tr>
    </tbody>
</table>

<h3>Available Widgetkit events</h3>

<table>
    <thead>
        <tr>
            <td>Event name</td>
            <td>Explanation</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>init</code></td>
            <td>Event is triggered when Widgetkit is initialized</td>
        </tr>
        <tr>
            <td><code>init.site</code></td>
            <td>Event is triggered when Widgetkit is initialized in the front end</td>
        </tr>
        <tr>
            <td><code>init.admin</code></td>
            <td>Event is triggered when Widgetkit is initialized in the back end</td>
        </tr>
    </tbody>
</table>

<h2>edit.php</h2>

TODO

<h2>widget.php</h2>

TODO